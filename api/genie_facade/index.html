
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../decorators/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Genie Facade & Interfaces - Genie Tooling Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/print-site.css">
    
      <link rel="stylesheet" href="../../css/print-site-material.css">
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#genie-facade-and-interfaces" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Genie Tooling Docs" class="md-header__button md-logo" aria-label="Genie Tooling Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Genie Tooling Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Genie Facade & Interfaces
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/genie-tooling/genie-tooling" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../guides/plugin_architecture/" class="md-tabs__link">
          
  
  
  Developer Guide

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tutorials/E01_simple_agent_cli/" class="md-tabs__link">
          
  
  
  Tutorials & Examples

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../changelog/" class="md-tabs__link">
        
  
  
    
  
  Changelog

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Genie Tooling Docs" class="md-nav__button md-logo" aria-label="Genie Tooling Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Genie Tooling Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/genie-tooling/genie-tooling" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    User Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/simplified_configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Simplified Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/using_llm_providers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using LLM Providers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/using_tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using Tools
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/using_rag/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using RAG
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/using_command_processors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using Command Processors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/tool_lookup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tool Lookup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/logging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Logging
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/using_prompts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prompt Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/using_conversation_state/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Conversation State
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/observability_tracing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Observability & Tracing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/using_human_in_loop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Human-in-the-Loop (HITL)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/token_usage_tracking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Token Usage Tracking
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/using_guardrails/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Guardrails
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/distributed_tasks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Distributed Tasks
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Developer Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Developer Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/plugin_architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plugin Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/extending_genie_tooling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extnding Genie Tooling
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/creating_plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Creating Plugins (Overview)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/creating_tool_plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Creating Tool Plugins
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/creating_rag_plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Creating RAG Plugins
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/creating_other_plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Creating Other Plugins
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Genie Facade & Interfaces
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Genie Facade & Interfaces
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#genie-facade" class="md-nav__link">
    <span class="md-ellipsis">
      Genie Facade
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#genie_tooling.genie.Genie" class="md-nav__link">
    <span class="md-ellipsis">
      Genie
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Genie">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#genie_tooling.genie.Genie-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#genie_tooling.genie.Genie.create" class="md-nav__link">
    <span class="md-ellipsis">
      create
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#genie_tooling.genie.Genie.get_default_embedder" class="md-nav__link">
    <span class="md-ellipsis">
      get_default_embedder
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#genie_tooling.genie.Genie.get_default_vector_store" class="md-nav__link">
    <span class="md-ellipsis">
      get_default_vector_store
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#genie_tooling.genie.Genie.run_command" class="md-nav__link">
    <span class="md-ellipsis">
      run_command
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-interfaces" class="md-nav__link">
    <span class="md-ellipsis">
      Core Interfaces
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#genie_tooling.interfaces.LLMInterface" class="md-nav__link">
    <span class="md-ellipsis">
      LLMInterface
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#genie_tooling.interfaces.RAGInterface" class="md-nav__link">
    <span class="md-ellipsis">
      RAGInterface
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#genie_tooling.interfaces.ObservabilityInterface" class="md-nav__link">
    <span class="md-ellipsis">
      ObservabilityInterface
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#genie_tooling.interfaces.HITLInterface" class="md-nav__link">
    <span class="md-ellipsis">
      HITLInterface
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#genie_tooling.interfaces.UsageTrackingInterface" class="md-nav__link">
    <span class="md-ellipsis">
      UsageTrackingInterface
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#genie_tooling.interfaces.PromptInterface" class="md-nav__link">
    <span class="md-ellipsis">
      PromptInterface
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#genie_tooling.interfaces.ConversationInterface" class="md-nav__link">
    <span class="md-ellipsis">
      ConversationInterface
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../decorators/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Decorators
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../core_types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Core Types
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../plugin_manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plugin Manager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MiddlewareConfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FeatureSettings
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tutorials & Examples
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Tutorials & Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/E01_simple_agent_cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Simple Agent CLI (E01)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/E02_ollama_chat_example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ollama Chat (E02)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/E03_openai_chat_example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenAI Chat (E03)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/E04_gemini_chat_example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gemini Chat (E04)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/E05_rag_pipeline_demo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RAG Pipeline Demo (E05)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/E06_run_command_simple_keyword_example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Simple Keyword Command (E06)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/E07_run_command_llm_assisted_example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LLM-Assisted Command (E07)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/E08_decorator_tool_example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    @tool Decorator (E08)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/E09_web_rag_example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Web RAG (E09)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/E10_chroma_tool_lookup_showcase/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ChromaDB Tool Lookup (E10)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/E11_advanced_showcase_agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Advanced Showcase (E11)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/E12_custom_key_provider_example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Custom KeyProvider (E12)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/E13_google_search_demo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Google Search Tool (E13)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/E14_filesystem_tool_demo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FileSystem Tool (E14)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/E15_prompt_management_example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prompt Management (E15)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/E16_conversation_state_example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Conversation State (E16)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/E17_observability_tracing_example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Observability & Tracing (E17)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/E18_human_in_loop_example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Human-in-the-Loop (E18)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/E19_llm_output_parsing_example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LLM Output Parsing (E19)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/E20_token_usage_example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Token Usage Tracking (E20)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/E21_guardrails_example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Guardrails (E21)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/E22_distributed_task_example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Distributed Tasks (E22)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/E23_local_e2e_llama_cpp_server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Llama.cpp Server E2E (E23)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/E24_local_e2e_llama_cpp_internal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Llama.cpp Internal E2E (E24)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/E25_llama_cpp_internal_gbnf_parsing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Llama.cpp Internal GBNF (E25)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/E26_deep_research_agent_e2e/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deep Research Agent E2E (E26)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/E27_pyvider_log_adapter_tracing_example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pyvider Log Adapter (E27)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#genie-facade" class="md-nav__link">
    <span class="md-ellipsis">
      Genie Facade
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#genie_tooling.genie.Genie" class="md-nav__link">
    <span class="md-ellipsis">
      Genie
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Genie">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#genie_tooling.genie.Genie-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#genie_tooling.genie.Genie.create" class="md-nav__link">
    <span class="md-ellipsis">
      create
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#genie_tooling.genie.Genie.get_default_embedder" class="md-nav__link">
    <span class="md-ellipsis">
      get_default_embedder
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#genie_tooling.genie.Genie.get_default_vector_store" class="md-nav__link">
    <span class="md-ellipsis">
      get_default_vector_store
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#genie_tooling.genie.Genie.run_command" class="md-nav__link">
    <span class="md-ellipsis">
      run_command
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-interfaces" class="md-nav__link">
    <span class="md-ellipsis">
      Core Interfaces
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#genie_tooling.interfaces.LLMInterface" class="md-nav__link">
    <span class="md-ellipsis">
      LLMInterface
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#genie_tooling.interfaces.RAGInterface" class="md-nav__link">
    <span class="md-ellipsis">
      RAGInterface
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#genie_tooling.interfaces.ObservabilityInterface" class="md-nav__link">
    <span class="md-ellipsis">
      ObservabilityInterface
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#genie_tooling.interfaces.HITLInterface" class="md-nav__link">
    <span class="md-ellipsis">
      HITLInterface
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#genie_tooling.interfaces.UsageTrackingInterface" class="md-nav__link">
    <span class="md-ellipsis">
      UsageTrackingInterface
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#genie_tooling.interfaces.PromptInterface" class="md-nav__link">
    <span class="md-ellipsis">
      PromptInterface
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#genie_tooling.interfaces.ConversationInterface" class="md-nav__link">
    <span class="md-ellipsis">
      ConversationInterface
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="genie-facade-and-interfaces">Genie Facade and Interfaces<a class="headerlink" href="#genie-facade-and-interfaces" title="Permanent link">&para;</a></h1>
<h2 id="genie-facade">Genie Facade<a class="headerlink" href="#genie-facade" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-class">



<h2 id="genie_tooling.genie.Genie" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">genie_tooling.genie.Genie</span>


<a href="#genie_tooling.genie.Genie" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">Genie</span><span class="p">(</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    <span class="n">plugin_manager</span><span class="p">:</span> <span class="n">PluginManager</span><span class="p">,</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="n">key_provider</span><span class="p">:</span> <span class="n">KeyProvider</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="n">config</span><span class="p">:</span> <span class="n">MiddlewareConfig</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="n">tool_manager</span><span class="p">:</span> <span class="n">ToolManager</span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="n">tool_invoker</span><span class="p">:</span> <span class="n">ToolInvoker</span><span class="p">,</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    <span class="n">rag_manager</span><span class="p">:</span> <span class="n">RAGManager</span><span class="p">,</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>    <span class="n">tool_lookup_service</span><span class="p">:</span> <span class="n">ToolLookupService</span><span class="p">,</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    <span class="n">llm_provider_manager</span><span class="p">:</span> <span class="n">LLMProviderManager</span><span class="p">,</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>    <span class="n">command_processor_manager</span><span class="p">:</span> <span class="n">CommandProcessorManager</span><span class="p">,</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>    <span class="n">log_adapter</span><span class="p">:</span> <span class="n">LogAdapter</span><span class="p">,</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>    <span class="n">tracing_manager</span><span class="p">:</span> <span class="n">InteractionTracingManager</span><span class="p">,</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>    <span class="n">hitl_manager</span><span class="p">:</span> <span class="n">HITLManager</span><span class="p">,</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>    <span class="n">token_usage_manager</span><span class="p">:</span> <span class="n">TokenUsageManager</span><span class="p">,</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>    <span class="n">guardrail_manager</span><span class="p">:</span> <span class="n">GuardrailManager</span><span class="p">,</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>    <span class="n">prompt_manager</span><span class="p">:</span> <span class="n">PromptManager</span><span class="p">,</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>    <span class="n">conversation_manager</span><span class="p">:</span> <span class="n">ConversationStateManager</span><span class="p">,</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>    <span class="n">llm_output_parser_manager</span><span class="p">:</span> <span class="n">LLMOutputParserManager</span><span class="p">,</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>    <span class="n">task_queue_manager</span><span class="p">:</span> <span class="n">DistributedTaskQueueManager</span><span class="p">,</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>    <span class="n">default_embedder</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">EmbeddingGeneratorPlugin</span><span class="p">],</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>    <span class="n">default_vector_store</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VectorStorePlugin</span><span class="p">],</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>    <span class="n">llm_interface</span><span class="p">:</span> <span class="n">LLMInterface</span><span class="p">,</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>    <span class="n">rag_interface</span><span class="p">:</span> <span class="n">RAGInterface</span><span class="p">,</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>    <span class="n">observability_interface</span><span class="p">:</span> <span class="n">ObservabilityInterface</span><span class="p">,</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>    <span class="n">hitl_interface</span><span class="p">:</span> <span class="n">HITLInterface</span><span class="p">,</span>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>    <span class="n">usage_tracking_interface</span><span class="p">:</span> <span class="n">UsageTrackingInterface</span><span class="p">,</span>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>    <span class="n">prompt_interface</span><span class="p">:</span> <span class="n">PromptInterface</span><span class="p">,</span>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a>    <span class="n">conversation_interface</span><span class="p">:</span> <span class="n">ConversationInterface</span><span class="p">,</span>
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>    <span class="n">task_queue_interface</span><span class="p">:</span> <span class="n">TaskQueueInterface</span><span class="p">,</span>
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents first">








                  <details class="quote">
                    <summary>Source code in <code>src/genie_tooling/genie.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-136" name="__codelineno-0-136"></a><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">plugin_manager</span><span class="p">:</span> <span class="n">PluginManager</span><span class="p">,</span> <span class="n">key_provider</span><span class="p">:</span> <span class="n">KeyProvider</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">MiddlewareConfig</span><span class="p">,</span> <span class="n">tool_manager</span><span class="p">:</span> <span class="n">ToolManager</span><span class="p">,</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a>    <span class="n">tool_invoker</span><span class="p">:</span> <span class="n">ToolInvoker</span><span class="p">,</span> <span class="n">rag_manager</span><span class="p">:</span> <span class="n">RAGManager</span><span class="p">,</span> <span class="n">tool_lookup_service</span><span class="p">:</span> <span class="n">ToolLookupService</span><span class="p">,</span> <span class="n">llm_provider_manager</span><span class="p">:</span> <span class="n">LLMProviderManager</span><span class="p">,</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a>    <span class="n">command_processor_manager</span><span class="p">:</span> <span class="n">CommandProcessorManager</span><span class="p">,</span> <span class="n">log_adapter</span><span class="p">:</span> <span class="n">LogAdapterPlugin</span><span class="p">,</span> <span class="n">tracing_manager</span><span class="p">:</span> <span class="n">InteractionTracingManager</span><span class="p">,</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a>    <span class="n">hitl_manager</span><span class="p">:</span> <span class="n">HITLManager</span><span class="p">,</span> <span class="n">token_usage_manager</span><span class="p">:</span> <span class="n">TokenUsageManager</span><span class="p">,</span> <span class="n">guardrail_manager</span><span class="p">:</span> <span class="n">GuardrailManager</span><span class="p">,</span> <span class="n">prompt_manager</span><span class="p">:</span> <span class="n">PromptManager</span><span class="p">,</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a>    <span class="n">conversation_manager</span><span class="p">:</span> <span class="n">ConversationStateManager</span><span class="p">,</span> <span class="n">llm_output_parser_manager</span><span class="p">:</span> <span class="n">LLMOutputParserManager</span><span class="p">,</span> <span class="n">task_queue_manager</span><span class="p">:</span> <span class="n">DistributedTaskQueueManager</span><span class="p">,</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a>    <span class="c1"># --- NEW: Add shared components to constructor ---</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a>    <span class="n">default_embedder</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">EmbeddingGeneratorPlugin</span><span class="p">],</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a>    <span class="n">default_vector_store</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VectorStorePlugin</span><span class="p">],</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>    <span class="c1"># --- END NEW ---</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a>    <span class="n">llm_interface</span><span class="p">:</span> <span class="n">LLMInterface</span><span class="p">,</span> <span class="n">rag_interface</span><span class="p">:</span> <span class="n">RAGInterface</span><span class="p">,</span> <span class="n">observability_interface</span><span class="p">:</span> <span class="n">ObservabilityInterface</span><span class="p">,</span> <span class="n">hitl_interface</span><span class="p">:</span> <span class="n">HITLInterface</span><span class="p">,</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>    <span class="n">usage_tracking_interface</span><span class="p">:</span> <span class="n">UsageTrackingInterface</span><span class="p">,</span> <span class="n">prompt_interface</span><span class="p">:</span> <span class="n">PromptInterface</span><span class="p">,</span> <span class="n">conversation_interface</span><span class="p">:</span> <span class="n">ConversationInterface</span><span class="p">,</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a>    <span class="n">task_queue_interface</span><span class="p">:</span> <span class="n">TaskQueueInterface</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a><span class="p">):</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_plugin_manager</span> <span class="o">=</span> <span class="n">plugin_manager</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_key_provider</span> <span class="o">=</span> <span class="n">key_provider</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">config</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_tool_manager</span> <span class="o">=</span> <span class="n">tool_manager</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_tool_invoker</span> <span class="o">=</span> <span class="n">tool_invoker</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_rag_manager</span> <span class="o">=</span> <span class="n">rag_manager</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_tool_lookup_service</span> <span class="o">=</span> <span class="n">tool_lookup_service</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_llm_provider_manager</span> <span class="o">=</span> <span class="n">llm_provider_manager</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_command_processor_manager</span> <span class="o">=</span> <span class="n">command_processor_manager</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_log_adapter</span> <span class="o">=</span> <span class="n">log_adapter</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_tracing_manager</span> <span class="o">=</span> <span class="n">tracing_manager</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_hitl_manager</span> <span class="o">=</span> <span class="n">hitl_manager</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_token_usage_manager</span> <span class="o">=</span> <span class="n">token_usage_manager</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_guardrail_manager</span> <span class="o">=</span> <span class="n">guardrail_manager</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_prompt_manager</span> <span class="o">=</span> <span class="n">prompt_manager</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_conversation_manager</span> <span class="o">=</span> <span class="n">conversation_manager</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_llm_output_parser_manager</span> <span class="o">=</span> <span class="n">llm_output_parser_manager</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_task_queue_manager</span> <span class="o">=</span> <span class="n">task_queue_manager</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>    <span class="c1"># --- NEW: Store shared components ---</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_default_embedder</span> <span class="o">=</span> <span class="n">default_embedder</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_default_vector_store</span> <span class="o">=</span> <span class="n">default_vector_store</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a>    <span class="c1"># --- END NEW ---</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">llm</span> <span class="o">=</span> <span class="n">llm_interface</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">rag</span> <span class="o">=</span> <span class="n">rag_interface</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">observability</span> <span class="o">=</span> <span class="n">observability_interface</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">human_in_loop</span> <span class="o">=</span> <span class="n">hitl_interface</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">usage</span> <span class="o">=</span> <span class="n">usage_tracking_interface</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">prompts</span> <span class="o">=</span> <span class="n">prompt_interface</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">conversation</span> <span class="o">=</span> <span class="n">conversation_interface</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">task_queue</span> <span class="o">=</span> <span class="n">task_queue_interface</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">_genie_instance</span> <span class="o">=</span> <span class="bp">self</span> <span class="c1"># type: ignore</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>    <span class="n">task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">observability</span><span class="o">.</span><span class="n">trace_event</span><span class="p">(</span><span class="s2">&quot;log.info&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Genie facade initialized with resolved configuration.&quot;</span><span class="p">},</span> <span class="s2">&quot;Genie&quot;</span><span class="p">))</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a>    <span class="n">background_tasks</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>    <span class="n">task</span><span class="o">.</span><span class="n">add_done_callback</span><span class="p">(</span><span class="n">background_tasks</span><span class="o">.</span><span class="n">discard</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">







<h3 id="genie_tooling.genie.Genie-functions">Functions<a href="#genie_tooling.genie.Genie-functions" class="headerlink" title="Permanent link">&para;</a></h3>

<div class="doc doc-object doc-function">


<h4 id="genie_tooling.genie.Genie.create" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">create</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#genie_tooling.genie.Genie.create" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">create</span><span class="p">(</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    <span class="n">config</span><span class="p">:</span> <span class="n">MiddlewareConfig</span><span class="p">,</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="n">key_provider_instance</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">KeyProvider</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="n">plugin_manager</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PluginManager</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Genie</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Asynchronously creates and initializes the Genie facade and its components.</p>
<p>This is the primary entry point for creating a Genie instance. It orchestrates
the discovery of plugins, resolution of configurations, and instantiation of
all necessary managers and interfaces.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><span title="genie_tooling.config.models.MiddlewareConfig">MiddlewareConfig</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The main configuration object for the middleware. <code>FeatureSettings</code>
can be used for simplified setup.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>key_provider_instance</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="KeyProvider (genie_tooling.security.key_provider.KeyProvider)" href="../#genie_tooling.KeyProvider">KeyProvider</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An optional, pre-configured KeyProvider instance.
If provided, this instance will be used instead of the one specified
in the configuration. This is useful for injecting a custom key provider
that is not discoverable as a standard plugin.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>plugin_manager</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="PluginManager (genie_tooling.core.plugin_manager.PluginManager)" href="../plugin_manager/#genie_tooling.core.plugin_manager.PluginManager">PluginManager</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An optional, pre-configured PluginManager instance.
If provided, this manager will be used for all plugin discovery and
instantiation. This is an advanced use case for scenarios where you need
to control the plugin lifecycle externally. If not provided, Genie
will create its own internal PluginManager.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="genie_tooling.genie.Genie" href="#genie_tooling.genie.Genie">Genie</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A fully initialized Genie instance, ready for use.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/genie_tooling/genie.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span>
<span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span>
<span class="normal"><a href="#__codelineno-0-220">220</a></span>
<span class="normal"><a href="#__codelineno-0-221">221</a></span>
<span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span>
<span class="normal"><a href="#__codelineno-0-247">247</a></span>
<span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span>
<span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span>
<span class="normal"><a href="#__codelineno-0-266">266</a></span>
<span class="normal"><a href="#__codelineno-0-267">267</a></span>
<span class="normal"><a href="#__codelineno-0-268">268</a></span>
<span class="normal"><a href="#__codelineno-0-269">269</a></span>
<span class="normal"><a href="#__codelineno-0-270">270</a></span>
<span class="normal"><a href="#__codelineno-0-271">271</a></span>
<span class="normal"><a href="#__codelineno-0-272">272</a></span>
<span class="normal"><a href="#__codelineno-0-273">273</a></span>
<span class="normal"><a href="#__codelineno-0-274">274</a></span>
<span class="normal"><a href="#__codelineno-0-275">275</a></span>
<span class="normal"><a href="#__codelineno-0-276">276</a></span>
<span class="normal"><a href="#__codelineno-0-277">277</a></span>
<span class="normal"><a href="#__codelineno-0-278">278</a></span>
<span class="normal"><a href="#__codelineno-0-279">279</a></span>
<span class="normal"><a href="#__codelineno-0-280">280</a></span>
<span class="normal"><a href="#__codelineno-0-281">281</a></span>
<span class="normal"><a href="#__codelineno-0-282">282</a></span>
<span class="normal"><a href="#__codelineno-0-283">283</a></span>
<span class="normal"><a href="#__codelineno-0-284">284</a></span>
<span class="normal"><a href="#__codelineno-0-285">285</a></span>
<span class="normal"><a href="#__codelineno-0-286">286</a></span>
<span class="normal"><a href="#__codelineno-0-287">287</a></span>
<span class="normal"><a href="#__codelineno-0-288">288</a></span>
<span class="normal"><a href="#__codelineno-0-289">289</a></span>
<span class="normal"><a href="#__codelineno-0-290">290</a></span>
<span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span>
<span class="normal"><a href="#__codelineno-0-293">293</a></span>
<span class="normal"><a href="#__codelineno-0-294">294</a></span>
<span class="normal"><a href="#__codelineno-0-295">295</a></span>
<span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span>
<span class="normal"><a href="#__codelineno-0-300">300</a></span>
<span class="normal"><a href="#__codelineno-0-301">301</a></span>
<span class="normal"><a href="#__codelineno-0-302">302</a></span>
<span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span>
<span class="normal"><a href="#__codelineno-0-305">305</a></span>
<span class="normal"><a href="#__codelineno-0-306">306</a></span>
<span class="normal"><a href="#__codelineno-0-307">307</a></span>
<span class="normal"><a href="#__codelineno-0-308">308</a></span>
<span class="normal"><a href="#__codelineno-0-309">309</a></span>
<span class="normal"><a href="#__codelineno-0-310">310</a></span>
<span class="normal"><a href="#__codelineno-0-311">311</a></span>
<span class="normal"><a href="#__codelineno-0-312">312</a></span>
<span class="normal"><a href="#__codelineno-0-313">313</a></span>
<span class="normal"><a href="#__codelineno-0-314">314</a></span>
<span class="normal"><a href="#__codelineno-0-315">315</a></span>
<span class="normal"><a href="#__codelineno-0-316">316</a></span>
<span class="normal"><a href="#__codelineno-0-317">317</a></span>
<span class="normal"><a href="#__codelineno-0-318">318</a></span>
<span class="normal"><a href="#__codelineno-0-319">319</a></span>
<span class="normal"><a href="#__codelineno-0-320">320</a></span>
<span class="normal"><a href="#__codelineno-0-321">321</a></span>
<span class="normal"><a href="#__codelineno-0-322">322</a></span>
<span class="normal"><a href="#__codelineno-0-323">323</a></span>
<span class="normal"><a href="#__codelineno-0-324">324</a></span>
<span class="normal"><a href="#__codelineno-0-325">325</a></span>
<span class="normal"><a href="#__codelineno-0-326">326</a></span>
<span class="normal"><a href="#__codelineno-0-327">327</a></span>
<span class="normal"><a href="#__codelineno-0-328">328</a></span>
<span class="normal"><a href="#__codelineno-0-329">329</a></span>
<span class="normal"><a href="#__codelineno-0-330">330</a></span>
<span class="normal"><a href="#__codelineno-0-331">331</a></span>
<span class="normal"><a href="#__codelineno-0-332">332</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-185" name="__codelineno-0-185"></a><span class="nd">@classmethod</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create</span><span class="p">(</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a>    <span class="bp">cls</span><span class="p">,</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a>    <span class="n">config</span><span class="p">:</span> <span class="n">MiddlewareConfig</span><span class="p">,</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a>    <span class="n">key_provider_instance</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">KeyProvider</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a>    <span class="n">plugin_manager</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PluginManager</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Genie</span><span class="p">:</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a><span class="sd">    Asynchronously creates and initializes the Genie facade and its components.</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a><span class="sd">    This is the primary entry point for creating a Genie instance. It orchestrates</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a><span class="sd">    the discovery of plugins, resolution of configurations, and instantiation of</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a><span class="sd">    all necessary managers and interfaces.</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a><span class="sd">        config: The main configuration object for the middleware. `FeatureSettings`</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a><span class="sd">            can be used for simplified setup.</span>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a><span class="sd">        key_provider_instance: An optional, pre-configured KeyProvider instance.</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a><span class="sd">            If provided, this instance will be used instead of the one specified</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a><span class="sd">            in the configuration. This is useful for injecting a custom key provider</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a><span class="sd">            that is not discoverable as a standard plugin.</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a><span class="sd">        plugin_manager: An optional, pre-configured PluginManager instance.</span>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a><span class="sd">            If provided, this manager will be used for all plugin discovery and</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a><span class="sd">            instantiation. This is an advanced use case for scenarios where you need</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a><span class="sd">            to control the plugin lifecycle externally. If not provided, Genie</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a><span class="sd">            will create its own internal PluginManager.</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a><span class="sd">        A fully initialized Genie instance, ready for use.</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a>    <span class="c1"># --- Dependency Injection for PluginManager ---</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a>    <span class="k">if</span> <span class="n">plugin_manager</span><span class="p">:</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a>        <span class="n">pm</span> <span class="o">=</span> <span class="n">plugin_manager</span>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Using pre-configured PluginManager provided to Genie.create().&quot;</span><span class="p">)</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a>        <span class="n">pm</span> <span class="o">=</span> <span class="n">PluginManager</span><span class="p">(</span><span class="n">plugin_dev_dirs</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">plugin_dev_dirs</span><span class="p">)</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a>        <span class="k">await</span> <span class="n">pm</span><span class="o">.</span><span class="n">discover_plugins</span><span class="p">()</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;No PluginManager provided, created a new internal instance and discovered plugins.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a>    <span class="c1"># --- Dependency Injection for KeyProvider ---</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a>    <span class="n">actual_key_provider</span><span class="p">:</span> <span class="n">KeyProvider</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a>    <span class="k">if</span> <span class="n">key_provider_instance</span><span class="p">:</span>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a>        <span class="n">actual_key_provider</span> <span class="o">=</span> <span class="n">key_provider_instance</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Using pre-configured KeyProvider provided to Genie.create().&quot;</span><span class="p">)</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">actual_key_provider</span><span class="p">,</span> <span class="n">CorePluginType</span><span class="p">):</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a>            <span class="n">kp_plugin_id</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">actual_key_provider</span><span class="p">,</span> <span class="s2">&quot;plugin_id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a>            <span class="k">if</span> <span class="n">kp_plugin_id</span> <span class="ow">and</span> <span class="p">(</span><span class="n">kp_plugin_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">pm</span><span class="o">.</span><span class="n">_plugin_instances</span> <span class="ow">or</span> <span class="n">pm</span><span class="o">.</span><span class="n">_plugin_instances</span><span class="p">[</span><span class="n">kp_plugin_id</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">actual_key_provider</span><span class="p">):</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a>                 <span class="n">pm</span><span class="o">.</span><span class="n">_plugin_instances</span><span class="p">[</span><span class="n">kp_plugin_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">actual_key_provider</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a>        <span class="c1"># Load KeyProvider using the definitive &#39;pm&#39; instance</span>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a>        <span class="n">kp_id_to_load</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">key_provider_id</span> <span class="ow">or</span> <span class="n">PLUGIN_ID_ALIASES</span><span class="p">[</span><span class="s2">&quot;env_keys&quot;</span><span class="p">]</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a>        <span class="n">kp_any</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pm</span><span class="o">.</span><span class="n">get_plugin_instance</span><span class="p">(</span><span class="n">kp_id_to_load</span><span class="p">)</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">kp_any</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">kp_any</span><span class="p">,</span> <span class="n">KeyProvider</span><span class="p">):</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to load KeyProvider with ID &#39;</span><span class="si">{</span><span class="n">kp_id_to_load</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a>        <span class="n">actual_key_provider</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">KeyProvider</span><span class="p">,</span> <span class="n">kp_any</span><span class="p">)</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Using KeyProvider: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">actual_key_provider</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> (ID: </span><span class="si">{</span><span class="nb">getattr</span><span class="p">(</span><span class="n">actual_key_provider</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;plugin_id&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;N/A&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a>    <span class="n">resolver</span> <span class="o">=</span> <span class="n">ConfigResolver</span><span class="p">()</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a>    <span class="n">resolved_config</span><span class="p">:</span> <span class="n">MiddlewareConfig</span> <span class="o">=</span> <span class="n">resolver</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">key_provider_instance</span><span class="o">=</span><span class="n">actual_key_provider</span><span class="p">)</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a>    <span class="n">default_log_adapter_id</span> <span class="o">=</span> <span class="n">resolved_config</span><span class="o">.</span><span class="n">default_log_adapter_id</span> <span class="ow">or</span> <span class="n">DefaultLogAdapter</span><span class="o">.</span><span class="n">plugin_id</span>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a>    <span class="n">log_adapter_config_from_mw</span> <span class="o">=</span> <span class="n">resolved_config</span><span class="o">.</span><span class="n">log_adapter_configurations</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">default_log_adapter_id</span><span class="p">,</span> <span class="p">{})</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a>    <span class="n">log_adapter_specific_config_with_pm</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">log_adapter_config_from_mw</span><span class="p">,</span> <span class="s2">&quot;plugin_manager&quot;</span><span class="p">:</span> <span class="n">pm</span><span class="p">}</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a>    <span class="n">log_adapter_instance_any</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pm</span><span class="o">.</span><span class="n">get_plugin_instance</span><span class="p">(</span><span class="n">default_log_adapter_id</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">log_adapter_specific_config_with_pm</span><span class="p">)</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a>    <span class="n">log_adapter_instance</span><span class="p">:</span> <span class="n">LogAdapterPlugin</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a>    <span class="k">if</span> <span class="n">log_adapter_instance_any</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">log_adapter_instance_any</span><span class="p">,</span> <span class="n">LogAdapterPlugin</span><span class="p">):</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a>        <span class="n">log_adapter_instance</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">LogAdapterPlugin</span><span class="p">,</span> <span class="n">log_adapter_instance_any</span><span class="p">)</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to load configured LogAdapter &#39;</span><span class="si">{</span><span class="n">default_log_adapter_id</span><span class="si">}</span><span class="s2">&#39;. Falling back to DefaultLogAdapter.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a>        <span class="n">log_adapter_instance</span> <span class="o">=</span> <span class="n">DefaultLogAdapter</span><span class="p">()</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a>        <span class="k">await</span> <span class="n">log_adapter_instance</span><span class="o">.</span><span class="n">setup</span><span class="p">({</span><span class="s2">&quot;plugin_manager&quot;</span><span class="p">:</span> <span class="n">pm</span><span class="p">})</span>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Using LogAdapter: </span><span class="si">{</span><span class="n">log_adapter_instance</span><span class="o">.</span><span class="n">plugin_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a>    <span class="c1"># Manager Initializations (all use `pm`)</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a>    <span class="n">default_tracer_id_from_config</span> <span class="o">=</span> <span class="n">resolved_config</span><span class="o">.</span><span class="n">default_observability_tracer_id</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a>    <span class="n">default_tracer_ids_list_for_manager</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="n">default_tracer_id_from_config</span><span class="p">]</span> <span class="k">if</span> <span class="n">default_tracer_id_from_config</span> <span class="k">else</span> <span class="kc">None</span>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a>    <span class="n">tracing_manager</span> <span class="o">=</span> <span class="n">InteractionTracingManager</span><span class="p">(</span><span class="n">pm</span><span class="p">,</span> <span class="n">default_tracer_ids_list_for_manager</span><span class="p">,</span> <span class="n">resolved_config</span><span class="o">.</span><span class="n">observability_tracer_configurations</span><span class="p">,</span> <span class="n">log_adapter_instance</span><span class="o">=</span><span class="n">log_adapter_instance</span><span class="p">)</span>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a>    <span class="n">tool_manager</span> <span class="o">=</span> <span class="n">ToolManager</span><span class="p">(</span><span class="n">plugin_manager</span><span class="o">=</span><span class="n">pm</span><span class="p">,</span> <span class="n">tracing_manager</span><span class="o">=</span><span class="n">tracing_manager</span><span class="p">)</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a>    <span class="k">await</span> <span class="n">tool_manager</span><span class="o">.</span><span class="n">initialize_tools</span><span class="p">(</span><span class="n">tool_configurations</span><span class="o">=</span><span class="n">resolved_config</span><span class="o">.</span><span class="n">tool_configurations</span><span class="p">)</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a>    <span class="n">tool_invoker</span> <span class="o">=</span> <span class="n">ToolInvoker</span><span class="p">(</span><span class="n">tool_manager</span><span class="o">=</span><span class="n">tool_manager</span><span class="p">,</span> <span class="n">plugin_manager</span><span class="o">=</span><span class="n">pm</span><span class="p">)</span>
<a id="__codelineno-0-267" name="__codelineno-0-267"></a>    <span class="n">rag_manager</span> <span class="o">=</span> <span class="n">RAGManager</span><span class="p">(</span><span class="n">plugin_manager</span><span class="o">=</span><span class="n">pm</span><span class="p">,</span> <span class="n">tracing_manager</span><span class="o">=</span><span class="n">tracing_manager</span><span class="p">)</span>
<a id="__codelineno-0-268" name="__codelineno-0-268"></a>    <span class="n">tool_lookup_service</span> <span class="o">=</span> <span class="n">ToolLookupService</span><span class="p">(</span><span class="n">tool_manager</span><span class="o">=</span><span class="n">tool_manager</span><span class="p">,</span> <span class="n">plugin_manager</span><span class="o">=</span><span class="n">pm</span><span class="p">,</span> <span class="n">default_provider_id</span><span class="o">=</span><span class="n">resolved_config</span><span class="o">.</span><span class="n">default_tool_lookup_provider_id</span><span class="p">,</span> <span class="n">default_indexing_formatter_id</span><span class="o">=</span><span class="n">resolved_config</span><span class="o">.</span><span class="n">default_tool_indexing_formatter_id</span><span class="p">,</span> <span class="n">tracing_manager</span><span class="o">=</span><span class="n">tracing_manager</span><span class="p">)</span>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a>    <span class="n">hitl_manager</span> <span class="o">=</span> <span class="n">HITLManager</span><span class="p">(</span><span class="n">pm</span><span class="p">,</span> <span class="n">resolved_config</span><span class="o">.</span><span class="n">default_hitl_approver_id</span><span class="p">,</span> <span class="n">resolved_config</span><span class="o">.</span><span class="n">hitl_approver_configurations</span><span class="p">)</span>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a>    <span class="n">default_recorder_id_from_config</span> <span class="o">=</span> <span class="n">resolved_config</span><span class="o">.</span><span class="n">default_token_usage_recorder_id</span>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a>    <span class="n">default_recorder_ids_list_for_manager</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="n">default_recorder_id_from_config</span><span class="p">]</span> <span class="k">if</span> <span class="n">default_recorder_id_from_config</span> <span class="k">else</span> <span class="kc">None</span>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a>    <span class="n">token_usage_manager</span> <span class="o">=</span> <span class="n">TokenUsageManager</span><span class="p">(</span><span class="n">pm</span><span class="p">,</span> <span class="n">default_recorder_ids_list_for_manager</span><span class="p">,</span> <span class="n">resolved_config</span><span class="o">.</span><span class="n">token_usage_recorder_configurations</span><span class="p">)</span>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a>    <span class="n">guardrail_manager</span> <span class="o">=</span> <span class="n">GuardrailManager</span><span class="p">(</span><span class="n">pm</span><span class="p">,</span> <span class="n">resolved_config</span><span class="o">.</span><span class="n">default_input_guardrail_ids</span><span class="p">,</span> <span class="n">resolved_config</span><span class="o">.</span><span class="n">default_output_guardrail_ids</span><span class="p">,</span> <span class="n">resolved_config</span><span class="o">.</span><span class="n">default_tool_usage_guardrail_ids</span><span class="p">,</span> <span class="n">resolved_config</span><span class="o">.</span><span class="n">guardrail_configurations</span><span class="p">)</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a>    <span class="n">prompt_manager</span> <span class="o">=</span> <span class="n">PromptManager</span><span class="p">(</span><span class="n">pm</span><span class="p">,</span> <span class="n">resolved_config</span><span class="o">.</span><span class="n">default_prompt_registry_id</span><span class="p">,</span> <span class="n">resolved_config</span><span class="o">.</span><span class="n">default_prompt_template_plugin_id</span><span class="p">,</span> <span class="n">resolved_config</span><span class="o">.</span><span class="n">prompt_registry_configurations</span><span class="p">,</span> <span class="n">resolved_config</span><span class="o">.</span><span class="n">prompt_template_configurations</span><span class="p">,</span> <span class="n">tracing_manager</span><span class="o">=</span><span class="n">tracing_manager</span><span class="p">)</span>
<a id="__codelineno-0-275" name="__codelineno-0-275"></a>    <span class="n">conversation_manager</span> <span class="o">=</span> <span class="n">ConversationStateManager</span><span class="p">(</span><span class="n">pm</span><span class="p">,</span> <span class="n">resolved_config</span><span class="o">.</span><span class="n">default_conversation_state_provider_id</span><span class="p">,</span> <span class="n">resolved_config</span><span class="o">.</span><span class="n">conversation_state_provider_configurations</span><span class="p">,</span> <span class="n">tracing_manager</span><span class="o">=</span><span class="n">tracing_manager</span><span class="p">)</span>
<a id="__codelineno-0-276" name="__codelineno-0-276"></a>    <span class="n">llm_output_parser_manager</span> <span class="o">=</span> <span class="n">LLMOutputParserManager</span><span class="p">(</span><span class="n">pm</span><span class="p">,</span> <span class="n">resolved_config</span><span class="o">.</span><span class="n">default_llm_output_parser_id</span><span class="p">,</span> <span class="n">resolved_config</span><span class="o">.</span><span class="n">llm_output_parser_configurations</span><span class="p">,</span> <span class="n">tracing_manager</span><span class="o">=</span><span class="n">tracing_manager</span><span class="p">)</span>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a>    <span class="n">task_queue_manager</span> <span class="o">=</span> <span class="n">DistributedTaskQueueManager</span><span class="p">(</span><span class="n">pm</span><span class="p">,</span> <span class="n">resolved_config</span><span class="o">.</span><span class="n">default_distributed_task_queue_id</span><span class="p">,</span> <span class="n">resolved_config</span><span class="o">.</span><span class="n">distributed_task_queue_configurations</span><span class="p">,</span> <span class="n">tracing_manager</span><span class="o">=</span><span class="n">tracing_manager</span><span class="p">)</span>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a>    <span class="n">llm_provider_manager</span> <span class="o">=</span> <span class="n">LLMProviderManager</span><span class="p">(</span><span class="n">pm</span><span class="p">,</span> <span class="n">actual_key_provider</span><span class="p">,</span> <span class="n">resolved_config</span><span class="p">,</span> <span class="n">token_usage_manager</span><span class="p">)</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a>    <span class="n">command_processor_manager</span> <span class="o">=</span> <span class="n">CommandProcessorManager</span><span class="p">(</span><span class="n">pm</span><span class="p">,</span> <span class="n">actual_key_provider</span><span class="p">,</span> <span class="n">resolved_config</span><span class="p">)</span>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a>    <span class="c1"># --- NEW: Shared Component Initialization ---</span>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a>    <span class="n">default_embedder_instance</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a>    <span class="k">if</span> <span class="n">resolved_config</span><span class="o">.</span><span class="n">default_rag_embedder_id</span><span class="p">:</span>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a>        <span class="n">embedder_config</span> <span class="o">=</span> <span class="n">resolved_config</span><span class="o">.</span><span class="n">embedding_generator_configurations</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">resolved_config</span><span class="o">.</span><span class="n">default_rag_embedder_id</span><span class="p">,</span> <span class="p">{})</span>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a>        <span class="n">embedder_config</span><span class="p">[</span><span class="s2">&quot;key_provider&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">actual_key_provider</span> <span class="c1"># Ensure key provider is passed</span>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a>        <span class="n">embedder_instance_any</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pm</span><span class="o">.</span><span class="n">get_plugin_instance</span><span class="p">(</span><span class="n">resolved_config</span><span class="o">.</span><span class="n">default_rag_embedder_id</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">embedder_config</span><span class="p">)</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a>        <span class="k">if</span> <span class="n">embedder_instance_any</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">embedder_instance_any</span><span class="p">,</span> <span class="n">EmbeddingGeneratorPlugin</span><span class="p">):</span>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a>            <span class="n">default_embedder_instance</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">EmbeddingGeneratorPlugin</span><span class="p">,</span> <span class="n">embedder_instance_any</span><span class="p">)</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a>    <span class="n">default_vector_store_instance</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a>    <span class="k">if</span> <span class="n">resolved_config</span><span class="o">.</span><span class="n">default_rag_vector_store_id</span><span class="p">:</span>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a>        <span class="n">vs_config</span> <span class="o">=</span> <span class="n">resolved_config</span><span class="o">.</span><span class="n">vector_store_configurations</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">resolved_config</span><span class="o">.</span><span class="n">default_rag_vector_store_id</span><span class="p">,</span> <span class="p">{})</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a>        <span class="n">vs_instance_any</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pm</span><span class="o">.</span><span class="n">get_plugin_instance</span><span class="p">(</span><span class="n">resolved_config</span><span class="o">.</span><span class="n">default_rag_vector_store_id</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">vs_config</span><span class="p">)</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a>        <span class="k">if</span> <span class="n">vs_instance_any</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">vs_instance_any</span><span class="p">,</span> <span class="n">VectorStorePlugin</span><span class="p">):</span>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a>            <span class="n">default_vector_store_instance</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">VectorStorePlugin</span><span class="p">,</span> <span class="n">vs_instance_any</span><span class="p">)</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a>    <span class="c1"># --- END NEW ---</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a>    <span class="c1"># Interface Initializations</span>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a>    <span class="n">llm_interface</span> <span class="o">=</span> <span class="n">LLMInterface</span><span class="p">(</span><span class="n">llm_provider_manager</span><span class="p">,</span> <span class="n">resolved_config</span><span class="o">.</span><span class="n">default_llm_provider_id</span><span class="p">,</span> <span class="n">llm_output_parser_manager</span><span class="p">,</span> <span class="n">tracing_manager</span><span class="p">,</span> <span class="n">guardrail_manager</span><span class="p">,</span> <span class="n">token_usage_manager</span><span class="p">)</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a>    <span class="n">rag_interface</span> <span class="o">=</span> <span class="n">RAGInterface</span><span class="p">(</span><span class="n">rag_manager</span><span class="p">,</span> <span class="n">resolved_config</span><span class="p">,</span> <span class="n">actual_key_provider</span><span class="p">,</span> <span class="n">tracing_manager</span><span class="p">)</span>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a>    <span class="n">observability_interface</span> <span class="o">=</span> <span class="n">ObservabilityInterface</span><span class="p">(</span><span class="n">tracing_manager</span><span class="p">)</span>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a>    <span class="n">hitl_interface</span> <span class="o">=</span> <span class="n">HITLInterface</span><span class="p">(</span><span class="n">hitl_manager</span><span class="p">)</span>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a>    <span class="n">usage_tracking_interface</span> <span class="o">=</span> <span class="n">UsageTrackingInterface</span><span class="p">(</span><span class="n">token_usage_manager</span><span class="p">)</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a>    <span class="n">prompt_interface</span> <span class="o">=</span> <span class="n">PromptInterface</span><span class="p">(</span><span class="n">prompt_manager</span><span class="p">)</span>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a>    <span class="n">conversation_interface</span> <span class="o">=</span> <span class="n">ConversationInterface</span><span class="p">(</span><span class="n">conversation_manager</span><span class="p">)</span>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a>    <span class="n">task_queue_interface</span> <span class="o">=</span> <span class="n">TaskQueueInterface</span><span class="p">(</span><span class="n">task_queue_manager</span><span class="p">)</span>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a>    <span class="c1"># Instantiate the Genie facade</span>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a>    <span class="n">genie_instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span>
<a id="__codelineno-0-310" name="__codelineno-0-310"></a>        <span class="n">plugin_manager</span><span class="o">=</span><span class="n">pm</span><span class="p">,</span> <span class="n">key_provider</span><span class="o">=</span><span class="n">actual_key_provider</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">resolved_config</span><span class="p">,</span>
<a id="__codelineno-0-311" name="__codelineno-0-311"></a>        <span class="n">tool_manager</span><span class="o">=</span><span class="n">tool_manager</span><span class="p">,</span> <span class="n">tool_invoker</span><span class="o">=</span><span class="n">tool_invoker</span><span class="p">,</span> <span class="n">rag_manager</span><span class="o">=</span><span class="n">rag_manager</span><span class="p">,</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a>        <span class="n">tool_lookup_service</span><span class="o">=</span><span class="n">tool_lookup_service</span><span class="p">,</span> <span class="n">llm_provider_manager</span><span class="o">=</span><span class="n">llm_provider_manager</span><span class="p">,</span>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a>        <span class="n">command_processor_manager</span><span class="o">=</span><span class="n">command_processor_manager</span><span class="p">,</span> <span class="n">log_adapter</span><span class="o">=</span><span class="n">log_adapter_instance</span><span class="p">,</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a>        <span class="n">tracing_manager</span><span class="o">=</span><span class="n">tracing_manager</span><span class="p">,</span> <span class="n">hitl_manager</span><span class="o">=</span><span class="n">hitl_manager</span><span class="p">,</span> <span class="n">token_usage_manager</span><span class="o">=</span><span class="n">token_usage_manager</span><span class="p">,</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a>        <span class="n">guardrail_manager</span><span class="o">=</span><span class="n">guardrail_manager</span><span class="p">,</span> <span class="n">prompt_manager</span><span class="o">=</span><span class="n">prompt_manager</span><span class="p">,</span>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a>        <span class="n">conversation_manager</span><span class="o">=</span><span class="n">conversation_manager</span><span class="p">,</span> <span class="n">llm_output_parser_manager</span><span class="o">=</span><span class="n">llm_output_parser_manager</span><span class="p">,</span>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a>        <span class="n">task_queue_manager</span><span class="o">=</span><span class="n">task_queue_manager</span><span class="p">,</span>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a>        <span class="c1"># --- NEW: Pass shared components to constructor ---</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a>        <span class="n">default_embedder</span><span class="o">=</span><span class="n">default_embedder_instance</span><span class="p">,</span>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a>        <span class="n">default_vector_store</span><span class="o">=</span><span class="n">default_vector_store_instance</span><span class="p">,</span>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a>        <span class="c1"># --- END NEW ---</span>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a>        <span class="n">llm_interface</span><span class="o">=</span><span class="n">llm_interface</span><span class="p">,</span> <span class="n">rag_interface</span><span class="o">=</span><span class="n">rag_interface</span><span class="p">,</span>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a>        <span class="n">observability_interface</span><span class="o">=</span><span class="n">observability_interface</span><span class="p">,</span> <span class="n">hitl_interface</span><span class="o">=</span><span class="n">hitl_interface</span><span class="p">,</span>
<a id="__codelineno-0-324" name="__codelineno-0-324"></a>        <span class="n">usage_tracking_interface</span><span class="o">=</span><span class="n">usage_tracking_interface</span><span class="p">,</span> <span class="n">prompt_interface</span><span class="o">=</span><span class="n">prompt_interface</span><span class="p">,</span>
<a id="__codelineno-0-325" name="__codelineno-0-325"></a>        <span class="n">conversation_interface</span><span class="o">=</span><span class="n">conversation_interface</span><span class="p">,</span> <span class="n">task_queue_interface</span><span class="o">=</span><span class="n">task_queue_interface</span>
<a id="__codelineno-0-326" name="__codelineno-0-326"></a>    <span class="p">)</span>
<a id="__codelineno-0-327" name="__codelineno-0-327"></a>
<a id="__codelineno-0-328" name="__codelineno-0-328"></a>    <span class="c1"># --- NEW: Run Bootstrap Plugins ---</span>
<a id="__codelineno-0-329" name="__codelineno-0-329"></a>    <span class="k">await</span> <span class="n">genie_instance</span><span class="o">.</span><span class="n">_run_bootstrap_plugins</span><span class="p">()</span>
<a id="__codelineno-0-330" name="__codelineno-0-330"></a>    <span class="c1"># --- END NEW ---</span>
<a id="__codelineno-0-331" name="__codelineno-0-331"></a>
<a id="__codelineno-0-332" name="__codelineno-0-332"></a>    <span class="k">return</span> <span class="n">genie_instance</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="genie_tooling.genie.Genie.get_default_embedder" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_default_embedder</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#genie_tooling.genie.Genie.get_default_embedder" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">get_default_embedder</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">EmbeddingGeneratorPlugin</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns the default embedding generator instance for the framework.</p>
<p>This allows extensions and other components to access a shared,
pre-configured embedding generator without needing to instantiate
their own.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="EmbeddingGeneratorPlugin (genie_tooling.embedding_generators.abc.EmbeddingGeneratorPlugin)" href="../#genie_tooling.EmbeddingGeneratorPlugin">EmbeddingGeneratorPlugin</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The configured default EmbeddingGeneratorPlugin instance, or None if</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="EmbeddingGeneratorPlugin (genie_tooling.embedding_generators.abc.EmbeddingGeneratorPlugin)" href="../#genie_tooling.EmbeddingGeneratorPlugin">EmbeddingGeneratorPlugin</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>not configured.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/genie_tooling/genie.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-370">370</a></span>
<span class="normal"><a href="#__codelineno-0-371">371</a></span>
<span class="normal"><a href="#__codelineno-0-372">372</a></span>
<span class="normal"><a href="#__codelineno-0-373">373</a></span>
<span class="normal"><a href="#__codelineno-0-374">374</a></span>
<span class="normal"><a href="#__codelineno-0-375">375</a></span>
<span class="normal"><a href="#__codelineno-0-376">376</a></span>
<span class="normal"><a href="#__codelineno-0-377">377</a></span>
<span class="normal"><a href="#__codelineno-0-378">378</a></span>
<span class="normal"><a href="#__codelineno-0-379">379</a></span>
<span class="normal"><a href="#__codelineno-0-380">380</a></span>
<span class="normal"><a href="#__codelineno-0-381">381</a></span>
<span class="normal"><a href="#__codelineno-0-382">382</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-370" name="__codelineno-0-370"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_default_embedder</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">EmbeddingGeneratorPlugin</span><span class="p">]:</span>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a><span class="sd">    Returns the default embedding generator instance for the framework.</span>
<a id="__codelineno-0-373" name="__codelineno-0-373"></a>
<a id="__codelineno-0-374" name="__codelineno-0-374"></a><span class="sd">    This allows extensions and other components to access a shared,</span>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a><span class="sd">    pre-configured embedding generator without needing to instantiate</span>
<a id="__codelineno-0-376" name="__codelineno-0-376"></a><span class="sd">    their own.</span>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a>
<a id="__codelineno-0-378" name="__codelineno-0-378"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-379" name="__codelineno-0-379"></a><span class="sd">        The configured default EmbeddingGeneratorPlugin instance, or None if</span>
<a id="__codelineno-0-380" name="__codelineno-0-380"></a><span class="sd">        not configured.</span>
<a id="__codelineno-0-381" name="__codelineno-0-381"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-382" name="__codelineno-0-382"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default_embedder</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="genie_tooling.genie.Genie.get_default_vector_store" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_default_vector_store</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#genie_tooling.genie.Genie.get_default_vector_store" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">get_default_vector_store</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VectorStorePlugin</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns the default vector store instance for the framework.</p>
<p>This allows extensions and other components to access a shared,
pre-configured vector store for RAG operations.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="VectorStorePlugin (genie_tooling.vector_stores.abc.VectorStorePlugin)" href="../#genie_tooling.VectorStorePlugin">VectorStorePlugin</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The configured default VectorStorePlugin instance, or None if</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="VectorStorePlugin (genie_tooling.vector_stores.abc.VectorStorePlugin)" href="../#genie_tooling.VectorStorePlugin">VectorStorePlugin</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>not configured.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/genie_tooling/genie.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-384">384</a></span>
<span class="normal"><a href="#__codelineno-0-385">385</a></span>
<span class="normal"><a href="#__codelineno-0-386">386</a></span>
<span class="normal"><a href="#__codelineno-0-387">387</a></span>
<span class="normal"><a href="#__codelineno-0-388">388</a></span>
<span class="normal"><a href="#__codelineno-0-389">389</a></span>
<span class="normal"><a href="#__codelineno-0-390">390</a></span>
<span class="normal"><a href="#__codelineno-0-391">391</a></span>
<span class="normal"><a href="#__codelineno-0-392">392</a></span>
<span class="normal"><a href="#__codelineno-0-393">393</a></span>
<span class="normal"><a href="#__codelineno-0-394">394</a></span>
<span class="normal"><a href="#__codelineno-0-395">395</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-384" name="__codelineno-0-384"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_default_vector_store</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VectorStorePlugin</span><span class="p">]:</span>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-386" name="__codelineno-0-386"></a><span class="sd">    Returns the default vector store instance for the framework.</span>
<a id="__codelineno-0-387" name="__codelineno-0-387"></a>
<a id="__codelineno-0-388" name="__codelineno-0-388"></a><span class="sd">    This allows extensions and other components to access a shared,</span>
<a id="__codelineno-0-389" name="__codelineno-0-389"></a><span class="sd">    pre-configured vector store for RAG operations.</span>
<a id="__codelineno-0-390" name="__codelineno-0-390"></a>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a><span class="sd">        The configured default VectorStorePlugin instance, or None if</span>
<a id="__codelineno-0-393" name="__codelineno-0-393"></a><span class="sd">        not configured.</span>
<a id="__codelineno-0-394" name="__codelineno-0-394"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-395" name="__codelineno-0-395"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default_vector_store</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="genie_tooling.genie.Genie.run_command" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">run_command</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#genie_tooling.genie.Genie.run_command" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">run_command</span><span class="p">(</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    <span class="n">command</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="n">processor_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="n">conversation_history</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">ChatMessage</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="n">context_for_tools</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Processes a natural language command to select and execute a tool.</p>
<p>This method orchestrates the full agentic loop for a single turn:
1.  Uses a configured <code>CommandProcessorPlugin</code> to interpret the command.
2.  The processor selects a tool and extracts its parameters.
3.  If a Human-in-the-Loop (HITL) system is active, it requests approval.
4.  If approved (or if HITL is not active), it executes the tool.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>command</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The user's natural language command string.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>processor_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional ID of a specific <code>CommandProcessorPlugin</code> to use,
overriding the default configured in <code>MiddlewareConfig</code>.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>conversation_history</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="ChatMessage (genie_tooling.llm_providers.types.ChatMessage)" href="../#genie_tooling.ChatMessage">ChatMessage</a>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional list of previous <code>ChatMessage</code> dicts to
provide context to the command processor.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>context_for_tools</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional dictionary passed to the <code>context</code> parameter
of the executed tool. This is useful for providing session-specific
data or user information to tools.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary representing the outcome. The structure depends on the result</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>of the command processing and tool execution:</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li><strong>On successful tool execution</strong>:
<code>{'tool_result': Any, 'thought_process': str, ...}</code></li>
</ul>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li><strong>If the processor determines no tool is needed but provides a direct answer (e.g., ReWOO)</strong>:
<code>{'final_answer': str, 'thought_process': str, ...}</code></li>
</ul>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li><strong>On error (e.g., processing fails, HITL denied, tool execution fails)</strong>:
<code>{'error': str, 'thought_process': str, ...}</code></li>
</ul>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The dictionary may contain other diagnostic keys like <code>raw_response</code> or <code>hitl_decision</code>.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/genie_tooling/genie.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-438">438</a></span>
<span class="normal"><a href="#__codelineno-0-439">439</a></span>
<span class="normal"><a href="#__codelineno-0-440">440</a></span>
<span class="normal"><a href="#__codelineno-0-441">441</a></span>
<span class="normal"><a href="#__codelineno-0-442">442</a></span>
<span class="normal"><a href="#__codelineno-0-443">443</a></span>
<span class="normal"><a href="#__codelineno-0-444">444</a></span>
<span class="normal"><a href="#__codelineno-0-445">445</a></span>
<span class="normal"><a href="#__codelineno-0-446">446</a></span>
<span class="normal"><a href="#__codelineno-0-447">447</a></span>
<span class="normal"><a href="#__codelineno-0-448">448</a></span>
<span class="normal"><a href="#__codelineno-0-449">449</a></span>
<span class="normal"><a href="#__codelineno-0-450">450</a></span>
<span class="normal"><a href="#__codelineno-0-451">451</a></span>
<span class="normal"><a href="#__codelineno-0-452">452</a></span>
<span class="normal"><a href="#__codelineno-0-453">453</a></span>
<span class="normal"><a href="#__codelineno-0-454">454</a></span>
<span class="normal"><a href="#__codelineno-0-455">455</a></span>
<span class="normal"><a href="#__codelineno-0-456">456</a></span>
<span class="normal"><a href="#__codelineno-0-457">457</a></span>
<span class="normal"><a href="#__codelineno-0-458">458</a></span>
<span class="normal"><a href="#__codelineno-0-459">459</a></span>
<span class="normal"><a href="#__codelineno-0-460">460</a></span>
<span class="normal"><a href="#__codelineno-0-461">461</a></span>
<span class="normal"><a href="#__codelineno-0-462">462</a></span>
<span class="normal"><a href="#__codelineno-0-463">463</a></span>
<span class="normal"><a href="#__codelineno-0-464">464</a></span>
<span class="normal"><a href="#__codelineno-0-465">465</a></span>
<span class="normal"><a href="#__codelineno-0-466">466</a></span>
<span class="normal"><a href="#__codelineno-0-467">467</a></span>
<span class="normal"><a href="#__codelineno-0-468">468</a></span>
<span class="normal"><a href="#__codelineno-0-469">469</a></span>
<span class="normal"><a href="#__codelineno-0-470">470</a></span>
<span class="normal"><a href="#__codelineno-0-471">471</a></span>
<span class="normal"><a href="#__codelineno-0-472">472</a></span>
<span class="normal"><a href="#__codelineno-0-473">473</a></span>
<span class="normal"><a href="#__codelineno-0-474">474</a></span>
<span class="normal"><a href="#__codelineno-0-475">475</a></span>
<span class="normal"><a href="#__codelineno-0-476">476</a></span>
<span class="normal"><a href="#__codelineno-0-477">477</a></span>
<span class="normal"><a href="#__codelineno-0-478">478</a></span>
<span class="normal"><a href="#__codelineno-0-479">479</a></span>
<span class="normal"><a href="#__codelineno-0-480">480</a></span>
<span class="normal"><a href="#__codelineno-0-481">481</a></span>
<span class="normal"><a href="#__codelineno-0-482">482</a></span>
<span class="normal"><a href="#__codelineno-0-483">483</a></span>
<span class="normal"><a href="#__codelineno-0-484">484</a></span>
<span class="normal"><a href="#__codelineno-0-485">485</a></span>
<span class="normal"><a href="#__codelineno-0-486">486</a></span>
<span class="normal"><a href="#__codelineno-0-487">487</a></span>
<span class="normal"><a href="#__codelineno-0-488">488</a></span>
<span class="normal"><a href="#__codelineno-0-489">489</a></span>
<span class="normal"><a href="#__codelineno-0-490">490</a></span>
<span class="normal"><a href="#__codelineno-0-491">491</a></span>
<span class="normal"><a href="#__codelineno-0-492">492</a></span>
<span class="normal"><a href="#__codelineno-0-493">493</a></span>
<span class="normal"><a href="#__codelineno-0-494">494</a></span>
<span class="normal"><a href="#__codelineno-0-495">495</a></span>
<span class="normal"><a href="#__codelineno-0-496">496</a></span>
<span class="normal"><a href="#__codelineno-0-497">497</a></span>
<span class="normal"><a href="#__codelineno-0-498">498</a></span>
<span class="normal"><a href="#__codelineno-0-499">499</a></span>
<span class="normal"><a href="#__codelineno-0-500">500</a></span>
<span class="normal"><a href="#__codelineno-0-501">501</a></span>
<span class="normal"><a href="#__codelineno-0-502">502</a></span>
<span class="normal"><a href="#__codelineno-0-503">503</a></span>
<span class="normal"><a href="#__codelineno-0-504">504</a></span>
<span class="normal"><a href="#__codelineno-0-505">505</a></span>
<span class="normal"><a href="#__codelineno-0-506">506</a></span>
<span class="normal"><a href="#__codelineno-0-507">507</a></span>
<span class="normal"><a href="#__codelineno-0-508">508</a></span>
<span class="normal"><a href="#__codelineno-0-509">509</a></span>
<span class="normal"><a href="#__codelineno-0-510">510</a></span>
<span class="normal"><a href="#__codelineno-0-511">511</a></span>
<span class="normal"><a href="#__codelineno-0-512">512</a></span>
<span class="normal"><a href="#__codelineno-0-513">513</a></span>
<span class="normal"><a href="#__codelineno-0-514">514</a></span>
<span class="normal"><a href="#__codelineno-0-515">515</a></span>
<span class="normal"><a href="#__codelineno-0-516">516</a></span>
<span class="normal"><a href="#__codelineno-0-517">517</a></span>
<span class="normal"><a href="#__codelineno-0-518">518</a></span>
<span class="normal"><a href="#__codelineno-0-519">519</a></span>
<span class="normal"><a href="#__codelineno-0-520">520</a></span>
<span class="normal"><a href="#__codelineno-0-521">521</a></span>
<span class="normal"><a href="#__codelineno-0-522">522</a></span>
<span class="normal"><a href="#__codelineno-0-523">523</a></span>
<span class="normal"><a href="#__codelineno-0-524">524</a></span>
<span class="normal"><a href="#__codelineno-0-525">525</a></span>
<span class="normal"><a href="#__codelineno-0-526">526</a></span>
<span class="normal"><a href="#__codelineno-0-527">527</a></span>
<span class="normal"><a href="#__codelineno-0-528">528</a></span>
<span class="normal"><a href="#__codelineno-0-529">529</a></span>
<span class="normal"><a href="#__codelineno-0-530">530</a></span>
<span class="normal"><a href="#__codelineno-0-531">531</a></span>
<span class="normal"><a href="#__codelineno-0-532">532</a></span>
<span class="normal"><a href="#__codelineno-0-533">533</a></span>
<span class="normal"><a href="#__codelineno-0-534">534</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-438" name="__codelineno-0-438"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run_command</span><span class="p">(</span>
<a id="__codelineno-0-439" name="__codelineno-0-439"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-440" name="__codelineno-0-440"></a>    <span class="n">command</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-441" name="__codelineno-0-441"></a>    <span class="n">processor_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-442" name="__codelineno-0-442"></a>    <span class="n">conversation_history</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">ChatMessage</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-443" name="__codelineno-0-443"></a>    <span class="n">context_for_tools</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-444" name="__codelineno-0-444"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<a id="__codelineno-0-445" name="__codelineno-0-445"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-446" name="__codelineno-0-446"></a><span class="sd">    Processes a natural language command to select and execute a tool.</span>
<a id="__codelineno-0-447" name="__codelineno-0-447"></a>
<a id="__codelineno-0-448" name="__codelineno-0-448"></a><span class="sd">    This method orchestrates the full agentic loop for a single turn:</span>
<a id="__codelineno-0-449" name="__codelineno-0-449"></a><span class="sd">    1.  Uses a configured `CommandProcessorPlugin` to interpret the command.</span>
<a id="__codelineno-0-450" name="__codelineno-0-450"></a><span class="sd">    2.  The processor selects a tool and extracts its parameters.</span>
<a id="__codelineno-0-451" name="__codelineno-0-451"></a><span class="sd">    3.  If a Human-in-the-Loop (HITL) system is active, it requests approval.</span>
<a id="__codelineno-0-452" name="__codelineno-0-452"></a><span class="sd">    4.  If approved (or if HITL is not active), it executes the tool.</span>
<a id="__codelineno-0-453" name="__codelineno-0-453"></a>
<a id="__codelineno-0-454" name="__codelineno-0-454"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-455" name="__codelineno-0-455"></a><span class="sd">        command: The user&#39;s natural language command string.</span>
<a id="__codelineno-0-456" name="__codelineno-0-456"></a><span class="sd">        processor_id: Optional ID of a specific `CommandProcessorPlugin` to use,</span>
<a id="__codelineno-0-457" name="__codelineno-0-457"></a><span class="sd">            overriding the default configured in `MiddlewareConfig`.</span>
<a id="__codelineno-0-458" name="__codelineno-0-458"></a><span class="sd">        conversation_history: Optional list of previous `ChatMessage` dicts to</span>
<a id="__codelineno-0-459" name="__codelineno-0-459"></a><span class="sd">            provide context to the command processor.</span>
<a id="__codelineno-0-460" name="__codelineno-0-460"></a><span class="sd">        context_for_tools: Optional dictionary passed to the `context` parameter</span>
<a id="__codelineno-0-461" name="__codelineno-0-461"></a><span class="sd">            of the executed tool. This is useful for providing session-specific</span>
<a id="__codelineno-0-462" name="__codelineno-0-462"></a><span class="sd">            data or user information to tools.</span>
<a id="__codelineno-0-463" name="__codelineno-0-463"></a>
<a id="__codelineno-0-464" name="__codelineno-0-464"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-465" name="__codelineno-0-465"></a><span class="sd">        A dictionary representing the outcome. The structure depends on the result</span>
<a id="__codelineno-0-466" name="__codelineno-0-466"></a><span class="sd">        of the command processing and tool execution:</span>
<a id="__codelineno-0-467" name="__codelineno-0-467"></a><span class="sd">        - **On successful tool execution**:</span>
<a id="__codelineno-0-468" name="__codelineno-0-468"></a><span class="sd">            `{&#39;tool_result&#39;: Any, &#39;thought_process&#39;: str, ...}`</span>
<a id="__codelineno-0-469" name="__codelineno-0-469"></a><span class="sd">        - **If the processor determines no tool is needed but provides a direct answer (e.g., ReWOO)**:</span>
<a id="__codelineno-0-470" name="__codelineno-0-470"></a><span class="sd">            `{&#39;final_answer&#39;: str, &#39;thought_process&#39;: str, ...}`</span>
<a id="__codelineno-0-471" name="__codelineno-0-471"></a><span class="sd">        - **On error (e.g., processing fails, HITL denied, tool execution fails)**:</span>
<a id="__codelineno-0-472" name="__codelineno-0-472"></a><span class="sd">            `{&#39;error&#39;: str, &#39;thought_process&#39;: str, ...}`</span>
<a id="__codelineno-0-473" name="__codelineno-0-473"></a><span class="sd">        The dictionary may contain other diagnostic keys like `raw_response` or `hitl_decision`.</span>
<a id="__codelineno-0-474" name="__codelineno-0-474"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-475" name="__codelineno-0-475"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_command_processor_manager</span><span class="p">:</span>
<a id="__codelineno-0-476" name="__codelineno-0-476"></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;CommandProcessorManager not initialized.&quot;</span><span class="p">}</span>
<a id="__codelineno-0-477" name="__codelineno-0-477"></a>    <span class="n">corr_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>
<a id="__codelineno-0-478" name="__codelineno-0-478"></a>    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">observability</span><span class="o">.</span><span class="n">trace_event</span><span class="p">(</span><span class="s2">&quot;genie.run_command.start&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;command_len&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">command</span><span class="p">),</span> <span class="s2">&quot;processor_id&quot;</span><span class="p">:</span> <span class="n">processor_id</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">default_command_processor_id</span><span class="p">,</span> <span class="s2">&quot;has_tool_context&quot;</span><span class="p">:</span> <span class="n">context_for_tools</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">},</span> <span class="s2">&quot;Genie&quot;</span><span class="p">,</span> <span class="n">corr_id</span><span class="p">)</span>
<a id="__codelineno-0-479" name="__codelineno-0-479"></a>    <span class="n">target_processor_id</span> <span class="o">=</span> <span class="n">processor_id</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">default_command_processor_id</span>
<a id="__codelineno-0-480" name="__codelineno-0-480"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">target_processor_id</span><span class="p">:</span>
<a id="__codelineno-0-481" name="__codelineno-0-481"></a>        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">observability</span><span class="o">.</span><span class="n">trace_event</span><span class="p">(</span><span class="s2">&quot;genie.run_command.error&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;NoProcessorConfigured&quot;</span><span class="p">},</span> <span class="s2">&quot;Genie&quot;</span><span class="p">,</span> <span class="n">corr_id</span><span class="p">)</span>
<a id="__codelineno-0-482" name="__codelineno-0-482"></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;No command processor configured.&quot;</span><span class="p">}</span>
<a id="__codelineno-0-483" name="__codelineno-0-483"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-484" name="__codelineno-0-484"></a>        <span class="n">processor_plugin</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_command_processor_manager</span><span class="o">.</span><span class="n">get_command_processor</span><span class="p">(</span><span class="n">target_processor_id</span><span class="p">,</span> <span class="n">genie_facade</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
<a id="__codelineno-0-485" name="__codelineno-0-485"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">processor_plugin</span><span class="p">:</span>
<a id="__codelineno-0-486" name="__codelineno-0-486"></a>            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">observability</span><span class="o">.</span><span class="n">trace_event</span><span class="p">(</span><span class="s2">&quot;genie.run_command.error&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;ProcessorNotFound&quot;</span><span class="p">,</span> <span class="s2">&quot;processor_id&quot;</span><span class="p">:</span> <span class="n">target_processor_id</span><span class="p">},</span> <span class="s2">&quot;Genie&quot;</span><span class="p">,</span> <span class="n">corr_id</span><span class="p">)</span>
<a id="__codelineno-0-487" name="__codelineno-0-487"></a>            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;CommandProcessor &#39;</span><span class="si">{</span><span class="n">target_processor_id</span><span class="si">}</span><span class="s2">&#39; not found.&quot;</span><span class="p">}</span>
<a id="__codelineno-0-488" name="__codelineno-0-488"></a>        <span class="n">process_command_kwargs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-489" name="__codelineno-0-489"></a>        <span class="n">processor_sig</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">processor_plugin</span><span class="o">.</span><span class="n">process_command</span><span class="p">)</span>
<a id="__codelineno-0-490" name="__codelineno-0-490"></a>        <span class="k">if</span> <span class="s2">&quot;correlation_id&quot;</span> <span class="ow">in</span> <span class="n">processor_sig</span><span class="o">.</span><span class="n">parameters</span><span class="p">:</span>
<a id="__codelineno-0-491" name="__codelineno-0-491"></a>            <span class="n">process_command_kwargs</span><span class="p">[</span><span class="s2">&quot;correlation_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">corr_id</span>
<a id="__codelineno-0-492" name="__codelineno-0-492"></a>        <span class="k">if</span> <span class="s2">&quot;genie_instance&quot;</span> <span class="ow">in</span> <span class="n">processor_sig</span><span class="o">.</span><span class="n">parameters</span><span class="p">:</span>
<a id="__codelineno-0-493" name="__codelineno-0-493"></a>             <span class="n">process_command_kwargs</span><span class="p">[</span><span class="s2">&quot;genie_instance&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span>
<a id="__codelineno-0-494" name="__codelineno-0-494"></a>        <span class="n">cmd_proc_response_any</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="k">await</span> <span class="n">processor_plugin</span><span class="o">.</span><span class="n">process_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">conversation_history</span><span class="p">,</span> <span class="o">**</span><span class="n">process_command_kwargs</span><span class="p">)</span>
<a id="__codelineno-0-495" name="__codelineno-0-495"></a>
<a id="__codelineno-0-496" name="__codelineno-0-496"></a>        <span class="c1"># Robustness check for processor response</span>
<a id="__codelineno-0-497" name="__codelineno-0-497"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cmd_proc_response_any</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-498" name="__codelineno-0-498"></a>            <span class="n">err_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Command processor &#39;</span><span class="si">{</span><span class="n">target_processor_id</span><span class="si">}</span><span class="s2">&#39; returned an unexpected type &#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">cmd_proc_response_any</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39; instead of a dictionary.&quot;</span>
<a id="__codelineno-0-499" name="__codelineno-0-499"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>
<a id="__codelineno-0-500" name="__codelineno-0-500"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>
<a id="__codelineno-0-501" name="__codelineno-0-501"></a>        <span class="n">cmd_proc_response</span><span class="p">:</span> <span class="n">CommandProcessorResponse</span> <span class="o">=</span> <span class="n">cmd_proc_response_any</span>
<a id="__codelineno-0-502" name="__codelineno-0-502"></a>
<a id="__codelineno-0-503" name="__codelineno-0-503"></a>        <span class="n">error_val</span><span class="p">,</span> <span class="n">thought_val</span> <span class="o">=</span> <span class="n">cmd_proc_response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">),</span> <span class="n">cmd_proc_response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;llm_thought_process&quot;</span><span class="p">)</span>
<a id="__codelineno-0-504" name="__codelineno-0-504"></a>        <span class="n">chosen_tool_id</span><span class="p">,</span> <span class="n">extracted_params</span> <span class="o">=</span> <span class="n">cmd_proc_response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;chosen_tool_id&quot;</span><span class="p">),</span> <span class="n">cmd_proc_response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;extracted_params&quot;</span><span class="p">)</span>
<a id="__codelineno-0-505" name="__codelineno-0-505"></a>        <span class="n">final_answer</span> <span class="o">=</span> <span class="n">cmd_proc_response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;final_answer&quot;</span><span class="p">)</span>
<a id="__codelineno-0-506" name="__codelineno-0-506"></a>        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">observability</span><span class="o">.</span><span class="n">trace_event</span><span class="p">(</span><span class="s2">&quot;genie.run_command.processor_result&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;chosen_tool_id&quot;</span><span class="p">:</span> <span class="n">chosen_tool_id</span><span class="p">,</span> <span class="s2">&quot;has_error&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">error_val</span><span class="p">),</span> <span class="s2">&quot;has_final_answer&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">final_answer</span><span class="p">)},</span> <span class="s2">&quot;Genie&quot;</span><span class="p">,</span> <span class="n">corr_id</span><span class="p">)</span>
<a id="__codelineno-0-507" name="__codelineno-0-507"></a>        <span class="k">if</span> <span class="n">error_val</span><span class="p">:</span>
<a id="__codelineno-0-508" name="__codelineno-0-508"></a>            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="n">error_val</span><span class="p">,</span> <span class="s2">&quot;thought_process&quot;</span><span class="p">:</span> <span class="n">thought_val</span><span class="p">,</span> <span class="s2">&quot;raw_response&quot;</span><span class="p">:</span> <span class="n">cmd_proc_response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;raw_response&quot;</span><span class="p">)}</span>
<a id="__codelineno-0-509" name="__codelineno-0-509"></a>        <span class="k">if</span> <span class="n">final_answer</span><span class="p">:</span>
<a id="__codelineno-0-510" name="__codelineno-0-510"></a>            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;final_answer&quot;</span><span class="p">:</span> <span class="n">final_answer</span><span class="p">,</span> <span class="s2">&quot;thought_process&quot;</span><span class="p">:</span> <span class="n">thought_val</span><span class="p">,</span> <span class="s2">&quot;raw_response&quot;</span><span class="p">:</span> <span class="n">cmd_proc_response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;raw_response&quot;</span><span class="p">)}</span>
<a id="__codelineno-0-511" name="__codelineno-0-511"></a>        <span class="k">if</span> <span class="n">chosen_tool_id</span> <span class="ow">and</span> <span class="n">extracted_params</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-512" name="__codelineno-0-512"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hitl_manager</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hitl_manager</span><span class="o">.</span><span class="n">is_active</span><span class="p">:</span>
<a id="__codelineno-0-513" name="__codelineno-0-513"></a>                <span class="n">approval_req_data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;tool_id&quot;</span><span class="p">:</span> <span class="n">chosen_tool_id</span><span class="p">,</span> <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="n">extracted_params</span><span class="p">}</span>
<a id="__codelineno-0-514" name="__codelineno-0-514"></a>                <span class="n">hitl_context_data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;command&quot;</span><span class="p">:</span> <span class="n">command</span><span class="p">,</span> <span class="s2">&quot;correlation_id&quot;</span><span class="p">:</span> <span class="n">corr_id</span><span class="p">}</span>
<a id="__codelineno-0-515" name="__codelineno-0-515"></a>                <span class="k">if</span> <span class="n">thought_val</span><span class="p">:</span>
<a id="__codelineno-0-516" name="__codelineno-0-516"></a>                    <span class="n">hitl_context_data</span><span class="p">[</span><span class="s2">&quot;processor_thought&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thought_val</span>
<a id="__codelineno-0-517" name="__codelineno-0-517"></a>                <span class="n">approval_req</span> <span class="o">=</span> <span class="n">ApprovalRequest</span><span class="p">(</span><span class="n">request_id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()),</span> <span class="n">prompt</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Approve execution of tool &#39;</span><span class="si">{</span><span class="n">chosen_tool_id</span><span class="si">}</span><span class="s2">&#39; with params: </span><span class="si">{</span><span class="n">extracted_params</span><span class="si">}</span><span class="s2">?&quot;</span><span class="p">,</span> <span class="n">data_to_approve</span><span class="o">=</span><span class="n">approval_req_data</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">hitl_context_data</span><span class="p">)</span>
<a id="__codelineno-0-518" name="__codelineno-0-518"></a>                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">observability</span><span class="o">.</span><span class="n">trace_event</span><span class="p">(</span><span class="s2">&quot;genie.run_command.hitl_request&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;tool_id&quot;</span><span class="p">:</span> <span class="n">chosen_tool_id</span><span class="p">,</span> <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="n">extracted_params</span><span class="p">},</span> <span class="s2">&quot;Genie&quot;</span><span class="p">,</span> <span class="n">corr_id</span><span class="p">)</span>
<a id="__codelineno-0-519" name="__codelineno-0-519"></a>                <span class="n">approval_resp</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">human_in_loop</span><span class="o">.</span><span class="n">request_approval</span><span class="p">(</span><span class="n">approval_req</span><span class="p">)</span>
<a id="__codelineno-0-520" name="__codelineno-0-520"></a>                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">observability</span><span class="o">.</span><span class="n">trace_event</span><span class="p">(</span><span class="s2">&quot;genie.run_command.hitl_response&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="n">approval_resp</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">],</span> <span class="s2">&quot;reason&quot;</span><span class="p">:</span> <span class="n">approval_resp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;reason&quot;</span><span class="p">)},</span> <span class="s2">&quot;Genie&quot;</span><span class="p">,</span> <span class="n">corr_id</span><span class="p">)</span>
<a id="__codelineno-0-521" name="__codelineno-0-521"></a>                <span class="k">if</span> <span class="n">approval_resp</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;approved&quot;</span><span class="p">:</span>
<a id="__codelineno-0-522" name="__codelineno-0-522"></a>                    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Tool execution denied by HITL: </span><span class="si">{</span><span class="n">approval_resp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;reason&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;No reason&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;thought_process&quot;</span><span class="p">:</span> <span class="n">thought_val</span><span class="p">,</span> <span class="s2">&quot;hitl_decision&quot;</span><span class="p">:</span> <span class="n">approval_resp</span><span class="p">}</span>
<a id="__codelineno-0-523" name="__codelineno-0-523"></a>            <span class="n">tool_result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">execute_tool</span><span class="p">(</span><span class="n">chosen_tool_id</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context_for_tools</span><span class="p">,</span> <span class="o">**</span><span class="n">extracted_params</span><span class="p">)</span>
<a id="__codelineno-0-524" name="__codelineno-0-524"></a>            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;tool_result&quot;</span><span class="p">:</span> <span class="n">tool_result</span><span class="p">,</span> <span class="s2">&quot;thought_process&quot;</span><span class="p">:</span> <span class="n">thought_val</span><span class="p">,</span> <span class="s2">&quot;raw_response&quot;</span><span class="p">:</span> <span class="n">cmd_proc_response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;raw_response&quot;</span><span class="p">)}</span>
<a id="__codelineno-0-525" name="__codelineno-0-525"></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;No tool selected by command processor.&quot;</span><span class="p">,</span> <span class="s2">&quot;thought_process&quot;</span><span class="p">:</span> <span class="n">thought_val</span><span class="p">,</span> <span class="s2">&quot;raw_response&quot;</span><span class="p">:</span> <span class="n">cmd_proc_response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;raw_response&quot;</span><span class="p">)}</span>
<a id="__codelineno-0-526" name="__codelineno-0-526"></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-527" name="__codelineno-0-527"></a>        <span class="c1"># Add exc_info=True to the trace event data</span>
<a id="__codelineno-0-528" name="__codelineno-0-528"></a>        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">observability</span><span class="o">.</span><span class="n">trace_event</span><span class="p">(</span>
<a id="__codelineno-0-529" name="__codelineno-0-529"></a>            <span class="s2">&quot;genie.run_command.error&quot;</span><span class="p">,</span>
<a id="__codelineno-0-530" name="__codelineno-0-530"></a>            <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="s2">&quot;exc_info&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
<a id="__codelineno-0-531" name="__codelineno-0-531"></a>            <span class="s2">&quot;Genie&quot;</span><span class="p">,</span>
<a id="__codelineno-0-532" name="__codelineno-0-532"></a>            <span class="n">corr_id</span><span class="p">,</span>
<a id="__codelineno-0-533" name="__codelineno-0-533"></a>        <span class="p">)</span>
<a id="__codelineno-0-534" name="__codelineno-0-534"></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Unexpected error in run_command: </span><span class="si">{</span><span class="n">e</span><span class="si">!s}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;raw_exception&quot;</span><span class="p">:</span> <span class="n">e</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="core-interfaces">Core Interfaces<a class="headerlink" href="#core-interfaces" title="Permanent link">&para;</a></h2>
<p>These interfaces are accessed via attributes on the <code>Genie</code> facade instance (e.g., <code>genie.llm</code>, <code>genie.rag</code>).</p>


<div class="doc doc-object doc-class">



<h2 id="genie_tooling.interfaces.LLMInterface" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">genie_tooling.interfaces.LLMInterface</span>


<a href="#genie_tooling.interfaces.LLMInterface" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">LLMInterface</span><span class="p">(</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    <span class="n">llm_provider_manager</span><span class="p">:</span> <span class="n">LLMProviderManager</span><span class="p">,</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="n">default_provider_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="n">output_parser_manager</span><span class="p">:</span> <span class="n">LLMOutputParserManager</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="n">tracing_manager</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">InteractionTracingManager</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="n">guardrail_manager</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">GuardrailManager</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    <span class="n">token_usage_manager</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TokenUsageManager</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents first">








                  <details class="quote">
                    <summary>Source code in <code>src/genie_tooling/interfaces.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span>
<span class="normal"><a href="#__codelineno-0-68">68</a></span>
<span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span>
<span class="normal"><a href="#__codelineno-0-75">75</a></span>
<span class="normal"><a href="#__codelineno-0-76">76</a></span>
<span class="normal"><a href="#__codelineno-0-77">77</a></span>
<span class="normal"><a href="#__codelineno-0-78">78</a></span>
<span class="normal"><a href="#__codelineno-0-79">79</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-64" name="__codelineno-0-64"></a><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>    <span class="n">llm_provider_manager</span><span class="p">:</span> <span class="s2">&quot;LLMProviderManager&quot;</span><span class="p">,</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>    <span class="n">default_provider_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>    <span class="n">output_parser_manager</span><span class="p">:</span> <span class="s2">&quot;LLMOutputParserManager&quot;</span><span class="p">,</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>    <span class="n">tracing_manager</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;InteractionTracingManager&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>    <span class="n">guardrail_manager</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;GuardrailManager&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>    <span class="n">token_usage_manager</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;TokenUsageManager&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a><span class="p">):</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_llm_provider_manager</span> <span class="o">=</span> <span class="n">llm_provider_manager</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_default_provider_id</span> <span class="o">=</span> <span class="n">default_provider_id</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_output_parser_manager</span> <span class="o">=</span> <span class="n">output_parser_manager</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_tracing_manager</span> <span class="o">=</span> <span class="n">tracing_manager</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_guardrail_manager</span> <span class="o">=</span> <span class="n">guardrail_manager</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_token_usage_manager</span> <span class="o">=</span> <span class="n">token_usage_manager</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;LLMInterface initialized with default provider ID: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_default_provider_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="genie_tooling.interfaces.RAGInterface" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">genie_tooling.interfaces.RAGInterface</span>


<a href="#genie_tooling.interfaces.RAGInterface" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">RAGInterface</span><span class="p">(</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    <span class="n">rag_manager</span><span class="p">:</span> <span class="n">RAGManager</span><span class="p">,</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="n">config</span><span class="p">:</span> <span class="n">MiddlewareConfig</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="n">key_provider</span><span class="p">:</span> <span class="n">KeyProvider</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="n">tracing_manager</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">InteractionTracingManager</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents first">








                  <details class="quote">
                    <summary>Source code in <code>src/genie_tooling/interfaces.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-286">286</a></span>
<span class="normal"><a href="#__codelineno-0-287">287</a></span>
<span class="normal"><a href="#__codelineno-0-288">288</a></span>
<span class="normal"><a href="#__codelineno-0-289">289</a></span>
<span class="normal"><a href="#__codelineno-0-290">290</a></span>
<span class="normal"><a href="#__codelineno-0-291">291</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-286" name="__codelineno-0-286"></a><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rag_manager</span><span class="p">:</span> <span class="s2">&quot;RAGManager&quot;</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="s2">&quot;MiddlewareConfig&quot;</span><span class="p">,</span> <span class="n">key_provider</span><span class="p">:</span> <span class="s2">&quot;KeyProvider&quot;</span><span class="p">,</span> <span class="n">tracing_manager</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;InteractionTracingManager&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_rag_manager</span> <span class="o">=</span> <span class="n">rag_manager</span>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">config</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_key_provider</span> <span class="o">=</span> <span class="n">key_provider</span>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_tracing_manager</span> <span class="o">=</span> <span class="n">tracing_manager</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;RAGInterface initialized.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="genie_tooling.interfaces.ObservabilityInterface" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">genie_tooling.interfaces.ObservabilityInterface</span>


<a href="#genie_tooling.interfaces.ObservabilityInterface" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">ObservabilityInterface</span><span class="p">(</span><span class="n">tracing_manager</span><span class="p">:</span> <span class="n">InteractionTracingManager</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents first">








                  <details class="quote">
                    <summary>Source code in <code>src/genie_tooling/interfaces.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-451">451</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-451" name="__codelineno-0-451"></a><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tracing_manager</span><span class="p">:</span> <span class="s2">&quot;InteractionTracingManager&quot;</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tracing_manager</span> <span class="o">=</span> <span class="n">tracing_manager</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="genie_tooling.interfaces.HITLInterface" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">genie_tooling.interfaces.HITLInterface</span>


<a href="#genie_tooling.interfaces.HITLInterface" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">HITLInterface</span><span class="p">(</span><span class="n">hitl_manager</span><span class="p">:</span> <span class="n">HITLManager</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents first">








                  <details class="quote">
                    <summary>Source code in <code>src/genie_tooling/interfaces.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-457">457</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-457" name="__codelineno-0-457"></a><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hitl_manager</span><span class="p">:</span> <span class="s2">&quot;HITLManager&quot;</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hitl_manager</span> <span class="o">=</span> <span class="n">hitl_manager</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="genie_tooling.interfaces.UsageTrackingInterface" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">genie_tooling.interfaces.UsageTrackingInterface</span>


<a href="#genie_tooling.interfaces.UsageTrackingInterface" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">UsageTrackingInterface</span><span class="p">(</span><span class="n">token_usage_manager</span><span class="p">:</span> <span class="n">TokenUsageManager</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents first">








                  <details class="quote">
                    <summary>Source code in <code>src/genie_tooling/interfaces.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-466">466</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-466" name="__codelineno-0-466"></a><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">token_usage_manager</span><span class="p">:</span> <span class="s2">&quot;TokenUsageManager&quot;</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token_usage_manager</span> <span class="o">=</span> <span class="n">token_usage_manager</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="genie_tooling.interfaces.PromptInterface" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">genie_tooling.interfaces.PromptInterface</span>


<a href="#genie_tooling.interfaces.PromptInterface" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">PromptInterface</span><span class="p">(</span><span class="n">prompt_manager</span><span class="p">:</span> <span class="n">PromptManager</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents first">








                  <details class="quote">
                    <summary>Source code in <code>src/genie_tooling/interfaces.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-476">476</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-476" name="__codelineno-0-476"></a><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prompt_manager</span><span class="p">:</span> <span class="s2">&quot;PromptManager&quot;</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prompt_manager</span> <span class="o">=</span> <span class="n">prompt_manager</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="genie_tooling.interfaces.ConversationInterface" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">genie_tooling.interfaces.ConversationInterface</span>


<a href="#genie_tooling.interfaces.ConversationInterface" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">ConversationInterface</span><span class="p">(</span><span class="n">conversation_manager</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ConversationStateManager</span><span class="p">])</span>
</code></pre></div>

    <div class="doc doc-contents first">








                  <details class="quote">
                    <summary>Source code in <code>src/genie_tooling/interfaces.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-487">487</a></span>
<span class="normal"><a href="#__codelineno-0-488">488</a></span>
<span class="normal"><a href="#__codelineno-0-489">489</a></span>
<span class="normal"><a href="#__codelineno-0-490">490</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-487" name="__codelineno-0-487"></a><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conversation_manager</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;ConversationStateManager&quot;</span><span class="p">]):</span>
<a id="__codelineno-0-488" name="__codelineno-0-488"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_conversation_manager</span> <span class="o">=</span> <span class="n">conversation_manager</span>
<a id="__codelineno-0-489" name="__codelineno-0-489"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_conversation_manager</span><span class="p">:</span>
<a id="__codelineno-0-490" name="__codelineno-0-490"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;ConversationInterface initialized without a ConversationStateManager. Operations will be no-ops or return defaults.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
    
  </body>
</html>